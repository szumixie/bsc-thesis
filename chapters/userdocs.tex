\chapter{User documentation}\label{ch:userdocs}

\section{Installation}
\begin{enumerate}
  \item Install Stack~\cite{stack}.
  \item Clone the repository:

        \mintinline{sh}{git clone https://github.com/szumixie/unnamed.git}

  \item Enter the directory: \mintinline{sh}{cd unnamed}.
  \item Run \mintinline{sh}{stack install --flag unnamed:release}.
\end{enumerate}

\section{Usage}

An Unnamed program can be written in a file with any source code editor.

Comments in the language are similar to Haskell and its derived languages.

\begin{minted}{unnamed.py:UnnamedLexer -x}
-- This is a line comment
{- This is a
   block comment -}
\end{minted}

Types can be defined with their church encoding

\begin{minted}{unnamed.py:UnnamedLexer -x}
Bool = ∀ {A} → A → A → A
\end{minted}

\begin{minted}{unnamed.py:UnnamedLexer -x}
true  : Bool = λ x y → x
false : Bool = λ x y → y
\end{minted}

\section{Lexical structure}

The language is indentation sensitive, similarly to Haskell~\cite{haskell2010}.

\section{Syntax}

\[ \Colon= \]

\section{Type system}

The typing rules of the language are presented in \cref{fig:typing}.

\begin{figure}
  \begin{gather*}
    \begin{prooftree}
      \infer0{\Gamma,\ x : A \vdash x : A}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash t : A}
      \hypo{\Gamma \vdash u : B[x \coleqq t]}
      \infer2{\Gamma
        \vdash \Let \{ x : A = t;\ u \} : B}
    \end{prooftree}
    \\
    \begin{prooftree}
      \infer0{\Gamma \vdash \Univ : \Univ}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash A : \Univ}
      \hypo{\Gamma,\ x : A \vdash B : \Univ}
      \infer2{\Gamma \vdash \forall (x : A) \to B : \Univ}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{\Gamma,\ x : A \vdash t : B}
      \infer1{\Gamma \vdash \lambda x \to t : \forall (x : A) \to B}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash t : \forall (x : A) \to B}
      \hypo{\Gamma \vdash u : A}
      \infer2{\Gamma \vdash t\ u : B[x \coleqq u]}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{\Gamma \vdash A : \Univ}
      \infer1{\Gamma \vdash \RowType A : \Univ}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \infer0{\Gamma \vdash \# \{ \} : \RowType A}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash t : A}
      \hypo{\Gamma \vdash r : \RowType A}
      \infer2{\Gamma \vdash \# \{ l : t \mid r \} : \RowType A}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{\Gamma \vdash R : \RowType \Univ}
      \infer1{\Gamma \vdash \RecordType R : \Univ}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \infer0{\Gamma \vdash \RecordLit \{ \} : \RecordType \# \{ \}}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash t : A}
      \hypo{\Gamma \vdash u : \RecordType R}
      \infer2{\Gamma \vdash \RecordLit \{ l = t \mid u \}
        : \RecordType \# \{ l : A \mid R \}}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{\Gamma \vdash t : \RecordType \# \{ l : A \mid R \}}
      \infer1{\Gamma \vdash t.l : A}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{\Gamma \vdash t : \RecordType \# \{ l : A \mid R \}}
      \infer1{\Gamma \vdash t \RecordRestr l : \RecordType R}
    \end{prooftree}
  \end{gather*}
  \caption{Typing rules}\label{fig:typing}
\end{figure}

\section{Semantics}
\Cref{fig:big-step}

\begin{figure}
  \begin{gather*}
    \begin{prooftree}
      \infer0{x \Downarrow x}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{u[x \coleqq t] \Downarrow u'}
      \infer1{\Let \{ x = t;\ u \} \Downarrow u'}
    \end{prooftree}
    \\
    \begin{prooftree}
      \infer0{\Univ \Downarrow \Univ}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{A \Downarrow A'}
      \hypo{B \Downarrow B'}
      \infer2{\forall (x : A) \to B \Downarrow \forall (x : A') \to B'}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{t \Downarrow t'}
      \infer1{\lambda x \to t \Downarrow \lambda x \to t'}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow \lambda x \to v}
      \hypo{v[x \coleqq u] \Downarrow v'}
      \infer2{t\ u \Downarrow v'}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow n}
      \hypo{u \Downarrow u'}
      \infer2{t\ u \Downarrow n\ u'}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{A \Downarrow A'}
      \infer1{\RowType A \Downarrow \RowType A'}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \infer0{\# \{ \} \Downarrow \# \{ \}}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow t'}
      \hypo{r \Downarrow r'}
      \infer2{\# \{ l : t \mid r \} \Downarrow \# \{ l : t' \mid r' \}}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{R \Downarrow R'}
      \infer1{\RecordType R \Downarrow \RecordType R'}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \infer0{\RecordLit \{ \} \Downarrow \RecordLit \{ \}}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow t'}
      \hypo{u \Downarrow u'}
      \infer2{\RecordLit \{ l = t \mid u \}
        \Downarrow \RecordLit \{ l = t' \mid u' \}}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{t \Downarrow \RecordLit \{ l = u \mid v \}}
      \infer1{t.l \Downarrow u}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow \RecordLit \{ l' = u \mid v \}}
      \hypo{l \neq l'}
      \hypo{v.l \Downarrow w}
      \infer3{t.l \Downarrow w}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow n}
      \infer1{t.l \Downarrow n.l}
    \end{prooftree}
    \\
    \begin{prooftree}
      \hypo{t \Downarrow \RecordLit \{ l = u \mid v \}}
      \infer1{t \RecordRestr l \Downarrow v}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow \RecordLit \{ l' = u \mid v \}}
      \hypo{l \neq l'}
      \hypo{v \RecordRestr l \Downarrow v'}
      \infer3{t \RecordRestr l \Downarrow \RecordLit \{ l' = u \mid v' \}}
    \end{prooftree}
    \qquad
    \begin{prooftree}
      \hypo{t \Downarrow n}
      \infer1{t \RecordRestr l \Downarrow n \RecordRestr l}
    \end{prooftree}
  \end{gather*}
  \caption{Big-step operational semantics}\label{fig:big-step}
\end{figure}

\section{Errors}
